<script setup lang="ts">
    const route = useRoute();
    const wishlist = useCookie(
        'wishlist',
        {
            default: () => [],
            watch: 'shallow'
        }
    );
</script>

<template>
    <div class="account-menu">
        <div class="account-menu__header">
            <span>Annette Black</span>
            annetteb@example.com
        </div>
        <div class="account-menu__list">
            <NuxtLink to="/account/" class="account-menu__list__item" :data-active="route.path === '/account/'">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M10.0002 2.70866C8.38937 2.70866 7.08353 4.0145 7.08353 5.62533C7.08353 7.23616 8.38937 8.54199 10.0002 8.54199C11.611 8.54199 12.9169 7.23616 12.9169 5.62533C12.9169 4.0145 11.611 2.70866 10.0002 2.70866ZM5.41686 5.62533C5.41686 3.09402 7.46889 1.04199 10.0002 1.04199C12.5315 1.04199 14.5835 3.09402 14.5835 5.62533C14.5835 8.15663 12.5315 10.2087 10.0002 10.2087C7.46889 10.2087 5.41686 8.15663 5.41686 5.62533Z" fill="#424551"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M5.08691 12.7087C4.50914 12.7087 4.05756 12.99 3.87424 13.3942C3.62053 13.9536 3.39078 14.6196 3.33656 15.2513C3.31233 15.5337 3.43007 15.7418 3.5923 15.8426C4.44993 16.3753 6.43719 17.292 10.0002 17.292C13.5632 17.292 15.5505 16.3753 16.4081 15.8426C16.5703 15.7418 16.6881 15.5337 16.6638 15.2513C16.6096 14.6196 16.3799 13.9536 16.1261 13.3942C15.9428 12.99 15.4912 12.7087 14.9135 12.7087H5.08691ZM2.35639 12.7058C2.86301 11.5887 3.99429 11.042 5.08691 11.042H14.9135C16.0061 11.042 17.1374 11.5887 17.644 12.7058C17.935 13.3474 18.2472 14.2099 18.3244 15.1088C18.3946 15.9273 18.0544 16.7819 17.2876 17.2583C16.1596 17.959 13.8665 18.9587 10.0002 18.9587C6.13386 18.9587 3.84078 17.959 2.71283 17.2583C1.94595 16.7819 1.60575 15.9273 1.676 15.1088C1.75315 14.2099 2.0654 13.3474 2.35639 12.7058Z" fill="#424551"/>
                </svg>
                My profile
            </NuxtLink><hr>
            <NuxtLink to="/account/wishlist/" class="account-menu__list__item wishlist" :data-active="route.path === '/account/wishlist/'">
                <span>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.99956 16.5894C6.167 14.4065 4.02946 12.2369 2.99582 10.3545C1.93789 8.42785 2.0302 6.80512 2.61724 5.65342C3.82389 3.28614 7.25522 2.52916 9.34586 5.17331L9.99951 6.00002L10.6532 5.17335C12.7442 2.52909 16.1757 3.2862 17.3823 5.65342C17.9694 6.80511 18.0617 8.42782 17.0037 10.3545C15.9699 12.2369 13.8323 14.4065 9.99956 16.5894ZM9.99959 3.42157C7.05858 0.626898 2.71992 1.78193 1.13235 4.89654C0.261063 6.60588 0.249161 8.81515 1.5349 11.1567C2.80924 13.4775 5.34999 15.9271 9.59643 18.2742L9.99954 18.497L10.4027 18.2742C14.6493 15.9271 17.1901 13.4775 18.4645 11.1567C19.7504 8.81518 19.7385 6.6059 18.8672 4.89654C17.2796 1.78187 12.9408 0.62694 9.99959 3.42157Z" fill="#424551"/>
                    </svg>
                    Wishlist
                </span>
                <div class="account-menu__list__item__tag" v-if="wishlist.length > 0">
                    {{ wishlist.length }}
                </div>
            </NuxtLink><hr>
            <NuxtLink to="/account/recently-viewed/" class="account-menu__list__item" :data-active="route.path === '/account/recently-viewed/'">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2.2007 7.09822C4.45412 5.21822 7.04836 4.16667 9.79185 4.16667C12.5353 4.16667 15.1296 5.21822 17.383 7.09822C17.7364 7.39305 18.2619 7.34558 18.5567 6.99218C18.8516 6.63878 18.8041 6.11328 18.4507 5.81845C15.945 3.72796 12.9831 2.5 9.79185 2.5C6.60065 2.5 3.63873 3.72796 1.133 5.81845C0.779606 6.11328 0.73213 6.63878 1.02696 6.99218C1.3218 7.34558 1.8473 7.39305 2.2007 7.09822Z" fill="#424551"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M3.41748 8.07419C4.91625 6.80886 7.05386 5.625 9.47933 5.625C11.9048 5.625 14.0424 6.80886 15.5412 8.07419C16.2967 8.71204 16.9162 9.39204 17.3539 9.99941C17.5724 10.3025 17.7546 10.5999 17.8857 10.8756C18.0061 11.1289 18.1252 11.4486 18.1252 11.7708C18.1252 12.0931 18.0061 12.4127 17.8857 12.666C17.7546 12.9418 17.5724 13.2392 17.3539 13.5423C16.9162 14.1496 16.2967 14.8296 15.5412 15.4675C14.0424 16.7328 11.9048 17.9167 9.47933 17.9167C7.05386 17.9167 4.91625 16.7328 3.41748 15.4675C2.66195 14.8296 2.0425 14.1496 1.60474 13.5423C1.38629 13.2392 1.20411 12.9418 1.07298 12.666C0.95253 12.4127 0.833496 12.0931 0.833496 11.7708C0.833496 11.4486 0.95253 11.1289 1.07298 10.8756C1.20411 10.5999 1.38629 10.3025 1.60474 9.99941C2.0425 9.39204 2.66195 8.71204 3.41748 8.07419ZM2.50607 11.7708C2.5145 11.7991 2.53395 11.8574 2.57812 11.9503C2.65513 12.1122 2.77992 12.3223 2.95681 12.5677C3.30972 13.0574 3.83438 13.6382 4.49263 14.194C5.82143 15.3158 7.59007 16.25 9.47933 16.25C11.3686 16.25 13.1372 15.3158 14.466 14.194C15.1243 13.6382 15.6489 13.0574 16.0018 12.5677C16.1787 12.3223 16.3035 12.1122 16.3805 11.9503C16.4247 11.8574 16.4442 11.799 16.4526 11.7708C16.4442 11.7426 16.4247 11.6843 16.3805 11.5914C16.3035 11.4295 16.1787 11.2193 16.0018 10.9739C15.6489 10.4843 15.1243 9.90343 14.466 9.3477C14.1865 9.11173 13.8876 8.88407 13.5721 8.67166C13.6879 9.05945 13.7502 9.47038 13.7502 9.89583C13.7502 12.2545 11.838 14.1667 9.47933 14.1667C7.12061 14.1667 5.2085 12.2545 5.2085 9.89583C5.2085 9.47038 5.27071 9.05945 5.38653 8.67166C5.07109 8.88407 4.77213 9.11174 4.49263 9.3477C3.83438 9.90343 3.30972 10.4843 2.95681 10.9739C2.77992 11.2193 2.65513 11.4295 2.57812 11.5914C2.53395 11.6843 2.5145 11.7426 2.50607 11.7708ZM6.87516 9.89583C6.87516 8.45759 8.04109 7.29167 9.47933 7.29167C10.9176 7.29167 12.0835 8.45759 12.0835 9.89583C12.0835 11.3341 10.9176 12.5 9.47933 12.5C8.04109 12.5 6.87516 11.3341 6.87516 9.89583Z" fill="#424551"/>
                </svg>
                Recently viewed
            </NuxtLink><hr>
            <NuxtLink to="/account/reviews/" class="account-menu__list__item" :data-active="route.path === '/account/reviews/'">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.47451 1.83435C9.05346 0.499228 10.9469 0.499226 11.5258 1.83435L13.2772 5.8731L17.6594 6.29069C19.1081 6.42873 19.6932 8.22945 18.6023 9.19265L15.3025 12.1063L16.2595 16.4032C16.5759 17.8236 15.0441 18.9365 13.7909 18.1967L10.0002 15.9587L6.20938 18.1967C4.95623 18.9365 3.42444 17.8236 3.74082 16.4032L4.69787 12.1063L1.39798 9.19265C0.307114 8.22945 0.892204 6.42873 2.34089 6.29069L6.72317 5.8731L8.47451 1.83435ZM11.7515 6.53468L10.0002 2.49593L8.24882 6.53468C8.00786 7.09035 7.48384 7.47107 6.88091 7.52852L2.49863 7.94611L5.79852 10.8598C6.25254 11.2607 6.45269 11.8767 6.32102 12.4679L5.36396 16.7647L9.15475 14.5267C9.6763 14.2188 10.324 14.2188 10.8456 14.5267L14.6364 16.7647L13.6793 12.4678C13.5476 11.8767 13.7478 11.2607 14.2018 10.8598L17.5017 7.94611L13.1194 7.52852C12.5165 7.47107 11.9925 7.09035 11.7515 6.53468Z" fill="#424551"/>
                </svg>
                My reviews
            </NuxtLink><hr>
            <NuxtLink to="/" class="account-menu__list__item">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13.7502 17.292C14.2104 17.292 14.5835 17.6651 14.5835 18.1253C14.5835 18.5856 14.2104 18.9587 13.7502 18.9587H5.20849C2.90731 18.9587 1.04183 17.0932 1.04183 14.792V5.20866C1.04183 2.90747 2.90731 1.04199 5.20849 1.04199H13.7502C14.2104 1.04199 14.5835 1.41509 14.5835 1.87533C14.5835 2.33556 14.2104 2.70866 13.7502 2.70866L5.20849 2.70866C3.82778 2.70866 2.70849 3.82795 2.70849 5.20866V14.792C2.70849 16.1727 3.82778 17.292 5.20849 17.292H13.7502Z" fill="#424551"/>
                    <path d="M4.79183 10.0003C4.79183 10.2213 4.87962 10.4333 5.03591 10.5896L8.78591 14.3396C9.11134 14.665 9.63898 14.665 9.96442 14.3396C10.2899 14.0141 10.2899 13.4865 9.96442 13.1611L7.63701 10.8337L18.1252 10.8337C18.5854 10.8337 18.9585 10.4606 18.9585 10.0003C18.9585 9.54009 18.5854 9.16699 18.1252 9.16699L7.63701 9.16699L9.96442 6.83958C10.2899 6.51414 10.2899 5.98651 9.96442 5.66107C9.63898 5.33563 9.11134 5.33563 8.78591 5.66107L5.03591 9.41107C4.87962 9.56735 4.79183 9.77931 4.79183 10.0003Z" fill="#424551"/>
                </svg>
                Sign out
            </NuxtLink>
        </div>
    </div>
</template>

<style lang="scss">
    .account-menu {
        border: 1px solid $gray-300;
        border-radius: .25rem;
        min-width: 17.75rem;
        box-shadow: 0 .25rem .25rem #1E212C0D;
        height: fit-content;
        &__header {
            @include df_fdc;
            padding: 1.25rem;
            color: $gray-700;
            span {
                @include strong_1;
                font-size: 1.25rem;
                color: $gray-800;
            }
        }
        &__list {
            @include df_fdc;
            hr {
                border: 0;
                border-top: 1px solid $gray-300;
            }
            &__item {
                @include df_ac;
                gap: .5rem;
                padding: .75rem 1.25rem;
                span {
                    @include df_ac;
                    gap: .5rem;
                }
                &.wishlist {
                    justify-content: space-between;
                }
                &__tag {
                    @include df_ac_jcc;
                    background-color: $warning;
                    border-radius: .25rem;
                    height: 1.25rem;
                    width: 1.5rem;
                    color: $white;
                    @include strong_2;
                    font-size: .75rem;
                }
                svg {
                    max-width: 1.25rem;
                    max-height: 1.25rem;
                    @include wh_100;
                }
                &[data-active="true"] {
                    background-color: $primary;
                    color: $white;
                    svg path {
                        fill: $white;
                    }
                }
            }
        }
    }
</style>